<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="welcome to wxt's blog!"><title>网络编程 | 晓甜不甜的博客！</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/5.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/blog/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/blog/favicon.ico"><link rel="apple-touch-icon" href="/blog/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/blog/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">网络编程</h1><a id="logo" href="/blog/.">晓甜不甜的博客！</a><p class="description"></p></div><div id="nav-menu"><a href="/blog/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/blog/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/blog/about/"><i class="fa fa-user"> 关于</i></a><a href="/blog/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">网络编程</h1><div class="post-meta">Aug 10, 2016<script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><div class="post-content"><h2 id="网络编程"><a href="#网络编程" class="headerlink" title="网络编程"></a>网络编程</h2><p>网络编程：<br><strong>1、网络编程概述</strong><br>&emsp;&emsp;(1)网络模型</p>
<ul>
<li>OSI参考模型</li>
<li>TCP/IP参考模型</li>
</ul>
<p>&emsp;(2)网络通讯要素</p>
<ul>
<li>IP地址</li>
<li>端口号</li>
<li>传输协议</li>
</ul>
<p>&emsp;(3)网络通讯前提：</p>
<ul>
<li>找到对方IP</li>
<li>数据要发送到指定端口。为了标示不同的应用程序，所以给这些网络应用程序都用数字进行标示.这个表示就叫端口。</li>
<li>定义通信规则。这个规则称为通信协议，国际组织定义了通用协议TCP/IP</li>
</ul>
<p>&emsp;4)计算机网络：</p>
<ul>
<li>是指将地理位置不同的具有独立功能的多台计算机及其外部设备，</li>
<li>通过通信线路连接起来，在网络操作系统，网络管理软件及网络通信协议的管理和协调下，</li>
<li>实现资源共享和信息传递的计算机系统。</li>
</ul>
<p>&emsp;(5)IP地址：<br>IP地址 = 网络号码+主机地址</p>
<p>A类IP地址:第一段号码为网络号码，剩下的三段号码为本地计算机的号码<br>B类IP地址:前二段号码为网络号码，剩下的二段号码为本地计算机的号码<br>C类IP地址:前三段号码为网络号码，剩下的一段号码为本地计算机的号码</p>
<p>特殊地址:<br>127.0.0.1 回环地址,可用于测试本机的网络是否有问题. ping 127.0.0.1<br>ipconfig:查看本机IP地址<br>xxx.xxx.xxx.0 网络地址<br>xxx.xxx.xxx.255 广播地址</p>
<p>A类 1.0.0.1—127.255.255.25410.X.X.X是私有地址(私有地址就是在互联网上不使用，而被用在局域网络中的地址) (2)127.X.X.X是保留地址，用做循环测试用的。<br>B类 128.0.0.1—191.255.255.254172.16.0.0—172.31.255.255是私有地址。169.254.X.X是保留地址。<br>C类 192.0.0.1—223.255.255.254192.168.X.X是私有地址<br>D类 224.0.0.1—239.255.255.254<br>E类 240.0.0.1—247.255.255.254</p>
<p>(6)各种网络分类方式<br>A:按网络覆盖范围划分<br>　　局域网(几米至10公里以内) 　　城域网(10~100公里) 　　广域网(几百公里到几千公里) 　　国际互联网<br>B:按网络拓扑结构划分<br>　　总线型网络 　　星形网络 　　环型网络 　　树状网络 　　混合型网络<br>C:按传输介质划分<br>　　有线网 　　无线网<br>D:按网络使用性质划分<br>　　公用网 　　专用网</p>
<p>(7)虚拟专用网络（Virtual Private Network ，简称VPN)指的是在公用网络上建立专用网络的技术。<br>其之所以称为虚拟网，主要是因为整个VPN网络的任意两个节点之间的连接并没有传统专网<br>所需的端到端的物理链路，而是架构在公用网络服务商所提供的网络平台，如Internet、<br>ATM(异步传输模式〉、Frame Relay （帧中继）等之上的逻辑网络，<br>用户数据在逻辑链路中传输。它涵盖了跨共享网络或公共网络的封装、<br>加密和身份验证链接的专用网络的扩展。VPN主要采用了隧道技术、加解密技术、<br>密钥管理技术和使用者与设备身份认证技术。</p>
<p>(8)网络模型：<br>OSI模型<br>应用层<br>表示层<br>会话层<br>传输层<br>网络层<br>数据连接层<br>物理层<br><em>**</em>TCP/IP模型<br>应用层<br>传输层<br>网际层<br>主机至网络层</p>
<p><strong>2、TCP和UDP</strong><br>(1)UDP和TCP的区别：<br>UDP<br>将数据及源和目的封装成数据包中，不需要建立连接<br>每个数据报的大小在限制在64k内<br>因无连接，是不可靠协议<br>不需要建立连接，速度快<br>TCP<br>建立连接，形成传输数据的通道。<br>在连接中进行大数据量传输<br>通过三次握手完成连接，是可靠协议<br>必须建立连接，效率会稍低<br>注：三次握手：<br>第一次：我问你在么？<br>第二次：你回答在。<br>第三次：我反馈哦我知道你在。</p>
<p><strong>3、Socket(UDP传输)</strong><br>Socket就是为网络服务提供的一种机制。<br>通信的两端都有Socket。<br>网络通信其实就是Socket间的通信。<br>数据在两个Socket间通过IO传输。<br>玩Socket主要就是记住流程，代码查文档就行</p>
<p>(1)UDP传输：DatagramSocket与DatagramPacket<br>发送端：<br>建立DatagramSocket服务；<br>提供数据，并将数据封装到字节数组中；<br>创建DatagramPacket数据包，并把数据封装到包中，同时指定IP和接收端口<br>通过Socket服务，利用send方法将数据包发送出去；<br>关闭DatagramSocket和DatagramPacket服务。<br>接收端：</p>
<blockquote>
<p>建立DatagramSocket服务，并监听一个端口；<br>定义一个字节数组和一个数据包，同时将数组封装进数据包；<br>通过DatagramPacket的receive方法，将接收的数据存入定义好的数据包；<br>通过DatagramPacke关闭t的方法，获取发送数据包中的信息；<br>关闭DatagramSocket和DatagramPacket服务。<br>DatagramSocket与DatagramPacket方法摘要：<br>DatagramSocket</p>
</blockquote>
<p>构造方法：</p>
<blockquote>
<p>DatagramSocket()<br>构造数据报套接字并将其绑定到本地主机上任何可用的端口。<br>DatagramSocket(int port)<br>创建数据报套接字并将其绑定到本地主机上的指定端口。<br>DatagramSocket(int port, InetAddress laddr)<br>创建数据报套接字，将其绑定到指定的本地地址。</p>
</blockquote>
<p>方法摘要:</p>
<blockquote>
<p>void close()<br>关闭此数据报套接字。<br>InetAddress getInetAddress()<br>返回此套接字连接的地址。<br>InetAddress getLocalAddress()<br>获取套接字绑定的本地地址。<br>int getPort()<br>返回此套接字的端口。<br>void receive(DatagramPacket p)<br>从此套接字接收数据报包。<br>void send(DatagramPacket p)<br>从此套接字发送数据报包。<br>DatagramPacket</p>
</blockquote>
<p>构造方法：</p>
<blockquote>
<p>DatagramPacket(byte[] buf, int length)<br>构造 DatagramPacket，用来接收长度为 length 的数据包。<br>DatagramPacket(byte[] buf, int length, InetAddress address, int port)<br>构造数据报包，用来将长度为 length 的包发送到指定主机上的指定端口号。<br>InetAddress getAddress()<br>返回某台机器的 IP 地址，此数据报将要发往该机器或者是从该机器接收到的。<br>byte[] getData()<br>返回数据缓冲区。<br>int getLength()<br>返回将要发送或接收到的数据的长度。<br>int getPort()<br>返回某台远程主机的端口号，此数据报将要发往该主机或者是从该主机接收到的。</p>
</blockquote>
<p>代码示例：<br>发送端：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">UDPSend</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span></div><div class="line">		&#123;</div><div class="line">			DatagramSocket ds = <span class="keyword">new</span> DatagramSocket();</div><div class="line">			<span class="keyword">byte</span>[] buf = <span class="string">"这是UDP发送端"</span>.getBytes();</div><div class="line">			DatagramPacket dp = <span class="keyword">new</span> DatagramPacket(</div><div class="line">				buf,buf.length,InetAddress.getByName(<span class="string">"192.168.1.253"</span>),<span class="number">10000</span>);</div><div class="line">			ds.send(dp);</div><div class="line">			ds.close();</div><div class="line">		&#125;</div><div class="line">	&#125;</div></pre></td></tr></table></figure></p>
<p>接收端<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">UDPRece</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span></div><div class="line">		&#123;</div><div class="line">			DatagramSocket ds = <span class="keyword">new</span> DatagramSocket(<span class="number">10000</span>);</div><div class="line">			<span class="keyword">byte</span>[] buf = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</div><div class="line">			DatagramPacket dp = <span class="keyword">new</span> DatagramPacket(buf,buf.length);</div><div class="line">			ds.receive(dp);<span class="comment">//将发送端发送的数据包接收到接收端的数据包中</span></div><div class="line">			String ip = dp.getAddress().getHosyAddress();<span class="comment">//获取发送端的ip</span></div><div class="line">			String data = <span class="keyword">new</span> String(dp.getData(),<span class="number">0</span>,dp.getLength());<span class="comment">//获取数据</span></div><div class="line">			<span class="keyword">int</span> port = dp.getPort();<span class="comment">//获取发送端的端口号</span></div><div class="line">			sop(ip+<span class="string">":"</span>+data+<span class="string">":"</span>+port);</div><div class="line">			ds.close();</div><div class="line">		&#125;</div><div class="line">	&#125;</div></pre></td></tr></table></figure></p>
<p>需求1：UDP键盘录入数据，并发送给接收端<br>发送端：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">UDPSend</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span></div><div class="line">		&#123;</div><div class="line"></div><div class="line"></div><div class="line">			DatagramSocket ds = <span class="keyword">new</span> DatagramSocket();</div><div class="line">			BufferedReader bufr = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(System.in));</div><div class="line">			String line = <span class="keyword">null</span>;</div><div class="line">			<span class="keyword">while</span>((line = bufr.readLine())!=<span class="keyword">null</span>)</div><div class="line">			&#123;</div><div class="line">				<span class="keyword">if</span>(<span class="string">"886"</span>.equals(line))</div><div class="line">					<span class="keyword">break</span>;</div><div class="line">				<span class="keyword">byte</span>[] buf = line.getBytes();</div><div class="line">				DatagramPacket dp = <span class="keyword">new</span> DatagramPacket(</div><div class="line">					buf,buf.length,InetAddress.getByName(<span class="string">"192.168.1.253"</span>),<span class="number">10000</span>);</div><div class="line">				ds.send(dp);</div><div class="line">			&#125;</div><div class="line">			ds.close();</div><div class="line">		&#125;</div><div class="line"></div><div class="line">	&#125;</div></pre></td></tr></table></figure></p>
<p>接收端：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">UDPRece</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span></div><div class="line">		&#123;</div><div class="line">			DatagramSocket ds = <span class="keyword">new</span> DatagramSocket(<span class="number">10000</span>);</div><div class="line">			<span class="keyword">while</span>(<span class="keyword">true</span>)</div><div class="line">			&#123;</div><div class="line">				<span class="keyword">byte</span>[] buf = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</div><div class="line">				DatagramPacket dp = <span class="keyword">new</span> DatagramPacket(buf,buf.length);</div><div class="line">				ds.receive(dp);<span class="comment">//将发送端发送的数据包接收到接收端的数据包中</span></div><div class="line">				String ip = dp.getAddress().getHosyAddress();<span class="comment">//获取发送端的ip</span></div><div class="line">				String data = <span class="keyword">new</span> String(dp.getData(),<span class="number">0</span>,dp.getLength());<span class="comment">//获取数据</span></div><div class="line">				<span class="keyword">int</span> port = dp.getPort();<span class="comment">//获取发送端的端口号</span></div><div class="line">				sop(ip+<span class="string">":"</span>+data+<span class="string">":"</span>+port);</div><div class="line">				ds.close();</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">	&#125;</div></pre></td></tr></table></figure></p>
<p>需求2：编写简单的聊天工具<br>思路：<br>使用多线程技术<br>发送端：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">UDPSend</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="keyword">private</span> DatagramSocket ds;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="title">UDPSend</span><span class="params">()</span></span>&#123;&#125;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="title">UDPSend</span><span class="params">(DatagramSocket ds)</span></span></div><div class="line">		&#123;</div><div class="line">			<span class="keyword">this</span>.ds=ds;</div><div class="line">		&#125;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></div><div class="line">		&#123;</div><div class="line">			<span class="keyword">try</span></div><div class="line">			&#123;</div><div class="line">				BufferedReader bufr = <span class="keyword">new</span> BufferedReader(</div><div class="line">							<span class="keyword">new</span> InputStreamReader(System.in));</div><div class="line">				String line = <span class="keyword">null</span>;</div><div class="line">				<span class="keyword">while</span>((line = bufr.readLine())!=<span class="keyword">null</span>)</div><div class="line">				&#123;</div><div class="line">					<span class="keyword">if</span>(<span class="string">"886"</span>.equals(line))</div><div class="line">						<span class="keyword">break</span>;</div><div class="line">					<span class="keyword">byte</span>[] buff = line.getBytes();</div><div class="line">					DatagramPacket dp = <span class="keyword">new</span> DatagramPacket(</div><div class="line">					buf,buf.length,InetAddress.getByName(<span class="string">"192.168.1.253"</span>),<span class="number">10000</span>);</div><div class="line">					ds.send(dp);</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">catch</span>(Exception e)</div><div class="line">			&#123;</div><div class="line">				<span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"发送失败"</span>);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div></pre></td></tr></table></figure></p>
<pre><code>接收端：
</code></pre><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">UDPRece</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">private</span> DatagramSocket ds;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">UDPSend</span><span class="params">()</span></span>&#123;&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">UDPSend</span><span class="params">(DatagramSocket ds)</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="keyword">this</span>.ds=ds;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="keyword">try</span></div><div class="line">		&#123;</div><div class="line">			<span class="keyword">while</span>(<span class="keyword">true</span>)</div><div class="line">			&#123;</div><div class="line">				<span class="keyword">byte</span>[] buf = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</div><div class="line">				DatagramPacket dp = <span class="keyword">new</span> DatagramPacket(buf,buf.length);</div><div class="line">				ds.receive(dp);<span class="comment">//将发送端发送的数据包接收到接收端的数据包中</span></div><div class="line">				String ip = dp.getAddress().getHosyAddress();<span class="comment">//获取发送端的ip</span></div><div class="line">				String data = <span class="keyword">new</span> String(dp.getData(),<span class="number">0</span>,dp.getLength());<span class="comment">//获取数据</span></div><div class="line">				<span class="keyword">int</span> port = dp.getPort();<span class="comment">//获取发送端的端口号</span></div><div class="line">				sop(ip+<span class="string">":"</span>+data+<span class="string">":"</span>+port);		</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">catch</span>(Exception e)</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"接收失败"</span>);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>测试类：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">UDPTest</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">		&#123;</div><div class="line">			DatagramSocket sendSocket = <span class="keyword">new</span> DatagramSocket();</div><div class="line">			DatagramSocket receSocket = <span class="keyword">new</span> DatagramSocket(<span class="number">10000</span>);</div><div class="line"></div><div class="line"></div><div class="line">			<span class="keyword">new</span> Thread(<span class="keyword">new</span> UDPSend(sendSocket)).start();</div><div class="line">			<span class="keyword">new</span> Thread(<span class="keyword">new</span> UDPRece(receSocket)).start();</div><div class="line">		&#125;</div><div class="line">	&#125;</div></pre></td></tr></table></figure></p>
<p>(2)TCP传输</p>
<blockquote>
<p>Socket和ServerSocket<br>建立客户端和服务器端<br>建立连接后，通过Socket中的IO流进行数据的传输<br>关闭socket<br>同样，客户端与服务器端是两个独立的应用程序。</p>
</blockquote>
<p>Socket<br>构造方法：</p>
<blockquote>
<p>Socket()<br>通过系统默认类型的 SocketImpl 创建未连接套接字<br>Socket(InetAddress address, int port)<br>创建一个流套接字并将其连接到指定 IP 地址的指定端口号。<br>Socket(String host, int port)<br>创建一个流套接字并将其连接到指定主机上的指定端口号。</p>
<p>方法摘要：<br>void close()<br>关闭此套接字。<br>InetAddress getInetAddress()<br>返回套接字连接的地址。<br>InputStream getInputStream()<br>返回此套接字的输入流。<br>OutputStream getOutputStream()<br>返回此套接字的输出流。<br>int getPort()<br>返回此套接字连接到的远程端口。<br>void shutdownInput()<br>此套接字的输入流置于“流的末尾”。<br>void shutdownOutput()<br>禁用此套接字的输出流。<br>String toString()<br>将此套接字转换为 String。</p>
<p>ServerSocket<br>**构造方法：<br>ServerSocket()<br>创建非绑定服务器套接字。<br>ServerSocket(int port)<br>创建绑定到特定端口的服务器套接字。</p>
</blockquote>
<p>方法摘要：</p>
<blockquote>
<p>Socket accept()<br>侦听并接受到此套接字的连接。<br>void close()<br>关闭此套接字。<br>InetAddress getInetAddress()<br>返回此服务器套接字的本地地址。</p>
</blockquote>
<p>TCP传输流程：</p>
<blockquote>
<p>客户端：<br>建立Socket服务，并制定要连接的主机和端口；<br>获取Socket流中的输出流OutputStream，将数据写入流中，通过网络发送给服务端；<br>获取Socket流中的输出流InputStream，获取服务端的反馈信息；<br>关闭资源。</p>
<p>服务端：<br>建立ServerSocket服务，并监听一个端口；<br>通过ServerSocket服务的accept方法，获取Socket服务对象；<br>使用客户端对象的读取流获取客户端发送过来的数据；<br>通过客户端对象的写入流反馈信息给客户端；<br>关闭资源；</p>
</blockquote>
<p>代码示例：<br>客户端：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TCPClient</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">	&#123;</div><div class="line">		Socket s = <span class="keyword">new</span> Socket(<span class="string">"192.168.1.253"</span>,<span class="number">10000</span>);</div><div class="line">		OutputStream os = s.getOutputStream();</div><div class="line">		out.write(<span class="string">"这是TCP发送的数据"</span>.getBytes());</div><div class="line">		s.close();</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line">服务端：</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TCPServer</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">	&#123;</div><div class="line">		ServerSocket ss = <span class="keyword">new</span> ServerSocket(<span class="number">10000</span>);</div><div class="line">		Socket s = ss.accept();</div><div class="line"></div><div class="line"></div><div class="line">		String ip = s.getInetAddress().getHostAddress();</div><div class="line">		sop(ip);</div><div class="line"></div><div class="line"></div><div class="line">		InputStream is = s.getInputStream();</div><div class="line">		<span class="keyword">byte</span>[] buf = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</div><div class="line">		<span class="keyword">int</span> len = is.read(buf);</div><div class="line">		sop(<span class="keyword">new</span> String(buf,<span class="number">0</span>,len));</div><div class="line">		s.close();</div><div class="line">		ss.close();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>TCP需求1：客户端给服务端发送数据，服务端接收到后反馈信息给客户端<br>客户端：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TCPClient</span></span></div><div class="line">		&#123;</div><div class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">			&#123;</div><div class="line">				Socket s = <span class="keyword">new</span> Socket(<span class="string">"192.168.1.253"</span>,<span class="number">10000</span>);</div><div class="line">				OutputStream os = s.getOutputStream();</div><div class="line">				out.write(<span class="string">"这是TCP发送的数据"</span>.getBytes());</div><div class="line"></div><div class="line">				InputStream is = s.getInputStream();</div><div class="line">				<span class="keyword">byte</span>[] buf = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</div><div class="line">				<span class="keyword">int</span> len = is.read(buf);</div><div class="line">				sop(<span class="keyword">new</span> String(buf,<span class="number">0</span>,len));</div><div class="line">				s.close();</div><div class="line">			&#125;</div><div class="line">		&#125;</div></pre></td></tr></table></figure></p>
<p>服务端：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TCPServer</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">		&#123;</div><div class="line">			ServerSocket ss = <span class="keyword">new</span> ServerSocket(<span class="number">10000</span>);</div><div class="line">			Socket s = ss.accept();</div><div class="line"></div><div class="line"></div><div class="line">			String ip = s.getInetAddress().getHostAddress();</div><div class="line">			sop(ip);</div><div class="line"></div><div class="line"></div><div class="line">			InputStream is = s.getInputStream();</div><div class="line">			<span class="keyword">byte</span>[] buf = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</div><div class="line">			<span class="keyword">int</span> len = is.read(buf);</div><div class="line">			sop(<span class="keyword">new</span> String(buf,<span class="number">0</span>,len));</div><div class="line"></div><div class="line"></div><div class="line">			OutputStream os = s.getOutputStream();</div><div class="line">			out.write(<span class="string">"这是TCP发送的数据"</span>.getBytes());</div><div class="line"></div><div class="line"></div><div class="line">			s.close();</div><div class="line">			ss.close();</div><div class="line">		&#125;</div><div class="line">	&#125;</div></pre></td></tr></table></figure></p>
<p>TCP需求2：建立一个文本转换服务端，客户给服务端发送文本，服务端将数据转换成大写后返回给客户端<br> 当客户端输入over时，转换结束<br>客户端：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TCPClient</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">		&#123;</div><div class="line">			Socket s = <span class="keyword">new</span> Socket(<span class="string">"192.168.1.253"</span>,<span class="number">10000</span>);</div><div class="line">			BufferedReader bufr = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(System.in));</div><div class="line">			BufferedWriter bufOut = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> OutputStreamWriter(</div><div class="line">									s.getOutputStream()));</div><div class="line">			BufferedReader bufIn = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(</div><div class="line">									s.getInputStream()));</div><div class="line">			String line = <span class="keyword">null</span>;</div><div class="line">			<span class="keyword">while</span>((line = bufr.readLine())!=<span class="keyword">null</span>)</div><div class="line">			&#123;</div><div class="line">				<span class="keyword">if</span>(<span class="string">"over"</span>.equals(line))</div><div class="line">					<span class="keyword">break</span>;</div><div class="line">				bufOut.write(line);</div><div class="line">				bufOut.newLine();</div><div class="line">				bufOut.flush();</div><div class="line">				String retVal = bufIn.readLine();</div><div class="line">				sop(<span class="string">"server:"</span>+retVal);</div><div class="line">			&#125;</div><div class="line">			bufr.close();</div><div class="line">			s.close();</div><div class="line">		&#125;</div><div class="line">	&#125;</div></pre></td></tr></table></figure></p>
<p>服务端：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TCPServer</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">		&#123;</div><div class="line">			ServerSocket ss = <span class="keyword">new</span> ServerSocket(<span class="number">10000</span>);</div><div class="line">			Socket s = ss.accept();</div><div class="line"></div><div class="line"></div><div class="line">			String ip = s.getInetAddress().getHostAddress();</div><div class="line">			sop(ip);</div><div class="line"></div><div class="line">			BufferedReader bufIn = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(</div><div class="line">									s.getInputStream()));</div><div class="line">			BufferedWriter bufOut = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> OutputStreamWriter(</div><div class="line">									s.getOutputStream()));</div><div class="line"></div><div class="line"></div><div class="line">			<span class="keyword">while</span>((line = bufIn.readLine())!=<span class="keyword">null</span>)</div><div class="line">			&#123;</div><div class="line">				bufOut.write(line.toUpperCase());</div><div class="line">				bufOut.newLine();</div><div class="line">				bufOut.flush();</div><div class="line">			&#125;</div><div class="line">			s.close();</div><div class="line">			ss.close();</div><div class="line">		&#125;</div><div class="line">	&#125;</div></pre></td></tr></table></figure></p>
<p>需求3：拷贝文件<br>客户端：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TCPClient</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">		&#123;</div><div class="line">			Socket s = <span class="keyword">new</span> Socket(<span class="string">"192.168.1.253"</span>,<span class="number">10000</span>);</div><div class="line">			BufferedReader bufr = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(<span class="string">"g:\\demo.txt"</span>));</div><div class="line">			PrintWriter pw = <span class="keyword">new</span> PrintWriter(s.getOutputStream(),<span class="keyword">true</span>);</div><div class="line">			String line = <span class="keyword">null</span>;</div><div class="line">			<span class="keyword">while</span>((line = bufr.readLine())!=<span class="keyword">null</span>)</div><div class="line">			&#123;</div><div class="line">				pw.println();</div><div class="line">			&#125;</div><div class="line">			s.shutDownOutput();</div><div class="line">			BufferedReader bufIn = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(</div><div class="line">									s.getInputStream()));</div><div class="line">			String retVal = bufIn.readLine();</div><div class="line">			sop(retVal);</div><div class="line">			bufr.close();</div><div class="line">			s.close();</div><div class="line">		&#125;</div><div class="line">	&#125;</div></pre></td></tr></table></figure></p>
<p>服务端：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TCPServer</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">		&#123;</div><div class="line">			ServerSocket ss = <span class="keyword">new</span> ServerSocket(<span class="number">10000</span>);</div><div class="line">			Socket s = ss.accept();</div><div class="line"></div><div class="line"></div><div class="line">			String ip = s.getInetAddress().getHostAddress();</div><div class="line">			sop(ip);</div><div class="line"></div><div class="line">			BufferedReader bufIn = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(</div><div class="line">									s.getInputStream()));</div><div class="line">			PrintWriter out = <span class="keyword">new</span> PrintWriter(<span class="keyword">new</span> FileWriter<span class="string">"copy.txt"</span>,<span class="keyword">true</span>);</div><div class="line">			String line =<span class="keyword">null</span>;</div><div class="line">			<span class="keyword">while</span>((line = bufIn.readLine())!=<span class="keyword">null</span>)</div><div class="line">			&#123;</div><div class="line">				out.write(line);</div><div class="line">			&#125;</div><div class="line">			PrintWriter pw = <span class="keyword">new</span> PrintWriter(s.getOutputStream(),<span class="keyword">true</span>);</div><div class="line">			pw.println(<span class="string">"上传成功"</span>);</div><div class="line">			out.close();</div><div class="line">			s.close();</div><div class="line">			ss.close();</div><div class="line">		&#125;</div><div class="line">	&#125;</div></pre></td></tr></table></figure></p>
<p>需求4：上传图片<br>客户端：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TCPClient</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">		&#123;</div><div class="line">			Socket s = <span class="keyword">new</span> Socket(<span class="string">"192.168.1.253"</span>,<span class="number">10000</span>);</div><div class="line">			FileInputStream fis = <span class="keyword">new</span> FileInputStream(<span class="string">"g:\\1.bmp"</span>);</div><div class="line">			OutputStream out = s.getOutputStream();</div><div class="line">			<span class="keyword">byte</span>[] buf = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</div><div class="line">			<span class="keyword">int</span> len = <span class="number">0</span>;</div><div class="line">			<span class="keyword">while</span>((len = bufr.read())!=-<span class="number">1</span>)</div><div class="line">			&#123;</div><div class="line">				out.write(buf,<span class="number">0</span>,len);</div><div class="line">			&#125;</div><div class="line">			s.shutDownOutput();</div><div class="line"></div><div class="line"></div><div class="line">			InputStream in = s.getInputStream();</div><div class="line">			<span class="keyword">byte</span>[] bufIn = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</div><div class="line">			<span class="keyword">int</span> lenIn = in.read(bufIn);</div><div class="line">			sop(<span class="keyword">new</span> String(bufIn,<span class="number">0</span>,lenIn);</div><div class="line">			fis.close();</div><div class="line">			s.close();</div><div class="line">		&#125;</div><div class="line">	&#125;</div></pre></td></tr></table></figure></p>
<p>服务端：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TCPServer</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">		&#123;</div><div class="line">			ServerSocket ss = <span class="keyword">new</span> ServerSocket(<span class="number">10000</span>);</div><div class="line">			Socket s = ss.accept();</div><div class="line"></div><div class="line"></div><div class="line">			String ip = s.getInetAddress().getHostAddress();</div><div class="line">			sop(ip);</div><div class="line">			FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"g:\\copy.bmp"</span>);</div><div class="line">			InputStream in = s.getInputStream();</div><div class="line">			<span class="keyword">byte</span>[] bufIn = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</div><div class="line">			<span class="keyword">int</span> lenIn = <span class="number">0</span>;</div><div class="line">			<span class="keyword">while</span>((lenIn=bufIn.read())!=-<span class="number">1</span>)</div><div class="line">			&#123;</div><div class="line">				fos.write(bufIn,<span class="number">0</span>,lenIn)</div><div class="line">			&#125;</div><div class="line"></div><div class="line"></div><div class="line">			OutputStream outIn = s.getOutputStream();</div><div class="line">			outIn.write(<span class="string">"上传成功"</span>.getBytes());</div><div class="line">			fos.close();</div><div class="line">			s.close();</div><div class="line">			ss.close();</div><div class="line">		&#125;</div><div class="line">	&#125;</div></pre></td></tr></table></figure></p>
<p>需求5：客户端并发登陆<br>客户端通过键盘录入用户名，服务端对这个用户名进行校验<br>如果用户存在，在服务端现实xxx已登录，并在客户端现实欢迎xxx<br>如果用户不存在，在服务端现实xxx正在尝试登陆，并在客户端现实xxx用户不存在<br>最多登陆三次。<br>校验端：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span></div><div class="line">	(</div><div class="line">		<span class="title">private</span> <span class="title">Socket</span> <span class="title">s</span>;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">()</span></span>&#123;&#125;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(Socket s)</span></span></div><div class="line">		&#123;</div><div class="line">			<span class="keyword">this</span>.s=s;</div><div class="line">		&#125;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></div><div class="line">		&#123;</div><div class="line">			<span class="keyword">try</span></div><div class="line">			&#123;</div><div class="line">				BufferedReader bufrIn = <span class="keyword">new</span> BufferedReader(</div><div class="line">						<span class="keyword">new</span> InputStream(s.getInputStream()))</div><div class="line">				String name = bufrIn.readLine();</div><div class="line">				<span class="keyword">if</span>(name==<span class="keyword">null</span>)</div><div class="line">				&#123;</div><div class="line">					sop(<span class="string">"用户名为空"</span>);</div><div class="line">					<span class="keyword">break</span>;</div><div class="line">				&#125;</div><div class="line">				BufferedReader bufr = <span class="keyword">new</span> BufferedReader(</div><div class="line">						<span class="keyword">new</span> FileReader(<span class="string">"user.txt"</span>));</div><div class="line">				PrintWriter pw = <span class="keyword">new</span> PrintWriter(s.getOutputStream(),<span class="keyword">true</span>);</div><div class="line">				String line = <span class="keyword">null</span>;</div><div class="line">				<span class="keyword">boolean</span> flag = <span class="keyword">false</span>;</div><div class="line">				<span class="keyword">while</span>((line = bufr.reanLine())!=<span class="keyword">null</span>)</div><div class="line">				&#123;</div><div class="line">					<span class="keyword">if</span>(line.equals(name))</div><div class="line">					&#123;</div><div class="line">						flag = <span class="keyword">true</span>;</div><div class="line">						<span class="keyword">break</span>;</div><div class="line">					&#125;</div><div class="line">					<span class="keyword">if</span>(flag)</div><div class="line">					&#123;</div><div class="line">						sop(name+<span class="string">"已登陆"</span>);</div><div class="line">						pw.println(<span class="string">"欢迎"</span>+name);</div><div class="line">						<span class="keyword">break</span>;</div><div class="line">					&#125;</div><div class="line">					<span class="keyword">else</span></div><div class="line">					&#123;</div><div class="line">						sop(name+<span class="string">"正尝试登陆"</span>);</div><div class="line">						pw.println(name+<span class="string">"用户不存在"</span>);</div><div class="line">					&#125;</div><div class="line"></div><div class="line"></div><div class="line">				&#125;</div><div class="line">				s.close();</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">catch</span>(Exception e)</div><div class="line">			&#123;</div><div class="line">				<span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"用户校验失败"</span>);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	)</div></pre></td></tr></table></figure></p>
<p>客户端：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoginClient</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">		&#123;</div><div class="line">			Socket s = <span class="keyword">new</span> Socket(<span class="string">"192.168.1.253"</span>,<span class="number">10000</span>);</div><div class="line">			BufferedReader bufr = <span class="keyword">new</span> BufferedReader(</div><div class="line">						<span class="keyword">new</span> InputStreamReader(System.in)));</div><div class="line">			PrintWriter out = <span class="keyword">new</span> PrintWriter(s.getOutputStream(),<span class="keyword">true</span>);</div><div class="line">			BufferedReader bufIn = <span class="keyword">new</span> BufferedReader(</div><div class="line">						<span class="keyword">new</span> InputStreamReader(s.getInputStream()));</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)</div><div class="line">			&#123;</div><div class="line">				String line = bufr.readLine();</div><div class="line">				<span class="keyword">if</span>(line == <span class="keyword">null</span>)</div><div class="line">				&#123;</div><div class="line">					sop(<span class="string">"用户名不能为空！"</span>);</div><div class="line">					<span class="keyword">break</span>;</div><div class="line">				&#125;</div><div class="line">				out.write(line);</div><div class="line">				String retVal = bufIn.readLine();</div><div class="line">				sop(retVal);</div><div class="line">			&#125;</div><div class="line">			bufr.close();</div><div class="line">			s.close();</div><div class="line">		&#125;</div><div class="line">	&#125;</div></pre></td></tr></table></figure></p>
<p>服务端：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoginServer</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">		&#123;</div><div class="line">			ServerSocket ss = <span class="keyword">new</span> ServerSocket(<span class="number">10000</span>);</div><div class="line">			<span class="keyword">while</span>(<span class="keyword">true</span>)</div><div class="line">			&#123;</div><div class="line">				Socket s = ss.accept();</div><div class="line">				<span class="keyword">new</span> Thread(<span class="keyword">new</span> User()).start();</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div></pre></td></tr></table></figure></p>
</div><script type="text/javascript" src="/blog/js/share.js?v=0.0.0" async></script><a data-url="http://Invadrxt.github.io/blog/blog/2016/08/10/网络编程/" data-id="cizzkbnx80018pvfygltqpkev" class="article-share-link">分享到</a><div class="tags"><a href="/blog/tags/java基础/">java基础</a></div><div class="post-nav"><a href="/blog/2016/08/10/反射/" class="pre">反射</a><a href="/blog/2016/08/08/泛型/" class="next">泛型</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://Invadrxt.github.io/blog"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/blog/tags/Struts2/" style="font-size: 15px;">Struts2</a> <a href="/blog/tags/java基础/" style="font-size: 15px;">java基础</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/blog/2017/03/07/hello-world/">Hello World</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2016/09/06/ Struct2进阶一/">Struts2进阶一</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2016/08/27/Struct2入门/">Struts2入门</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2016/08/10/关于jdbc-util的封装/">关于jdbc-util的封装</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2016/08/10/枚举/">枚举</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2016/08/10/反射/">反射</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2016/08/10/网络编程/">网络编程</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2016/08/08/泛型/">泛型</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2016/08/08/IO流:/">IO流</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2016/08/08/IO流/">IO流</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/blog/." rel="nofollow">晓甜不甜的博客！.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/blog/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/blog/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/blog/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/blog/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/blog/js/smartresize.js?v=0.0.0"></script></div></body></html>